#set_directive_allocation -limit 26858 -type operation md add
#set_directive_allocation -limit 11150 -type operation md mul

set_directive_resource -core RAM_1P_BRAM "md" force_x
set_directive_resource -core RAM_1P_BRAM "md" force_y
set_directive_resource -core RAM_1P_BRAM "md" force_z
set_directive_resource -core RAM_1P_BRAM "md" position_x
set_directive_resource -core RAM_1P_BRAM "md" position_y
set_directive_resource -core RAM_1P_BRAM "md" position_z
set_directive_resource -core RAM_1P_BRAM "md" NL

set_directive_array_partition -factor 8 -type cyclic md force_x
set_directive_array_partition -factor 8 -type cyclic md force_y
set_directive_array_partition -factor 8 -type cyclic md force_z
set_directive_array_partition -factor 8 -type cyclic md position_x
set_directive_array_partition -factor 8 -type cyclic md position_y
set_directive_array_partition -factor 8 -type cyclic md position_z
set_directive_array_partition -factor 8 -type cyclic md NL

#set_directive_unroll -factor 8 md/loop_i
#set_directive_unroll -factor 8 md/loop_j

#set_directive_loop_flatten md/loop_j
#set_directive_loop_flatten md/loop_j

#set_directive_pipeline md/loop_i
set_directive_pipeline md/loop_j

#set_directive_resource -core Mul "md" mul

#Notes
# Hard to guess what add, mul and mult used to be.
