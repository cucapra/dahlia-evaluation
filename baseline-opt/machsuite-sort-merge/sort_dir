#select memory resources
set_directive_resource -core RAM_1P_BRAM "sort" a
set_directive_resource -core RAM_1P_BRAM "merge" a

#loop pipelining factors
#set_directive_pipeline sort/mergesort_label1
#set_directive_pipeline sort/mergesort_label2

set_directive_pipeline merge/merge_label1
set_directive_pipeline merge/merge_label2
set_directive_pipeline merge/merge_label3

#loop unrolling
#set_directive_unroll -factor 2  sort/mergesort_label1
#set_directive_unroll -factor 2  sort/mergesort_label2

#set_directive_unroll -factor 2  merge/merge_label1
#set_directive_unroll -factor 2  merge/merge_label2
#set_directive_unroll -factor 2  merge/merge_label3

#Array partitioning
set_directive_array_partition -factor 2 -type cyclic sort a
set_directive_array_partition -factor 2 -type cyclic merge a

#estimation
# Based on software
set_directive_loop_tripcount -avg 2047 sort/mergesort_label1
set_directive_loop_tripcount -avg 186  sort/mergesort_label2
set_directive_loop_tripcount -avg 5    merge/merge_label1
set_directive_loop_tripcount -avg 6    merge/merge_label2
set_directive_loop_tripcount -avg 11   merge/merge_label3
