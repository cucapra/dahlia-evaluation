decor "#pragma SDS data copy(m1[0:64][0:64])"

decl m1: double[64][64 bank 4];
decl m2: double[64 bank 4][64 bank 4];
decl prod: double[64][64 bank 4];

view m1_v = m1[_: bank 1][_: bank 1];
view m2_v = m2[_: bank 1][_: bank 1];
view prod_v = prod[_: bank 1][_: bank 1];
for (let i = 0..64) {
  for (let j = 0..64) pipeline {
    let sum: double = 0.0;
    for (let k = 0..64) {
      let mult = m1_v[i][k] * m2_v[k][j];
    } combine {
      sum += mult;
    }
    prod_v[i][j] := sum;
  }
}
